
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>E-Commerce Demo (Admin Payment)</title>
<style>
body{font-family:Arial,margin:0;background:#f6f7fb}
header{background:#111;color:#fff;padding:12px}
.container{max-width:1100px;margin:auto;padding:16px}
.card{background:#fff;border-radius:8px;padding:16px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.08)}
.row{display:flex;gap:12px;flex-wrap:wrap}
.col{flex:1}
button{padding:8px 12px;border:0;border-radius:6px;background:#4f46e5;color:#fff;cursor:pointer}
button.secondary{background:#6b7280}
input,select{padding:8px;border-radius:6px;border:1px solid #ddd;width:100%}
.badge{padding:4px 8px;border-radius:999px;background:#e5e7eb}
.hidden{display:none}
table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid #eee;text-align:left}
</style>
</head>
<body>
<header>
  <div class="container">
    <strong>E-Commerce Demo</strong> â€” Admin input payment
  </div>
</header>

<div class="container">
  <div class="card">
    <h3>Login Cepat (Demo)</h3>
    <div class="row">
      <div class="col">
        <select id="role">
          <option value="BUYER">Buyer</option>
          <option value="SELLER">Seller</option>
          <option value="ADMIN">Admin</option>
        </select>
      </div>
      <div class="col"><button onclick="login()">Masuk</button></div>
    </div>
  </div>

  <div id="buyer" class="hidden">
    <div class="card"><h3>Buyer</h3>
      <button class="secondary" onclick="logout()">Logout</button>
      <h4>Produk</h4>
      <div id="products"></div>
    </div>
    <div class="card">
      <h4>Pesanan Saya</h4>
      <table id="buyerOrders"></table>
    </div>
  </div>

  <div id="seller" class="hidden">
    <div class="card"><h3>Seller</h3>
      <button class="secondary" onclick="logout()">Logout</button>
      <h4>Tambah Produk</h4>
      <div class="row">
        <div class="col"><input id="pname" placeholder="Nama"/></div>
        <div class="col"><input id="pprice" type="number" placeholder="Harga"/></div>
        <div class="col"><button onclick="addProduct()">Tambah</button></div>
      </div>
    </div>
    <div class="card">
      <h4>Pesanan Masuk</h4>
      <table id="sellerOrders"></table>
    </div>
  </div>

  <div id="admin" class="hidden">
    <div class="card"><h3>Admin</h3>
      <button class="secondary" onclick="logout()">Logout</button>
      <h4>Konfirmasi Pembayaran</h4>
      <table id="adminOrders"></table>
    </div>
  </div>
</div>

<script>
const db = JSON.parse(localStorage.getItem('db')||'{}');
db.products = db.products || [{id:1,name:'Produk A',price:10000}];
db.orders = db.orders || [];
localStorage.setItem('db',JSON.stringify(db));

let role=null;

function login(){
  role=document.getElementById('role').value;
  ['buyer','seller','admin'].forEach(x=>document.getElementById(x).classList.add('hidden'));
  document.getElementById(role.toLowerCase()).classList.remove('hidden');
  render();
}
function logout(){ role=null; location.reload(); }

function render(){
  const db=JSON.parse(localStorage.getItem('db'));
  if(role==='BUYER'){
    const p=document.getElementById('products');
    p.innerHTML=db.products.map(pr=>`
      <div class="card">
        <strong>${pr.name}</strong> - Rp${pr.price}
        <button style="float:right" onclick="order(${pr.id})">Order</button>
      </div>`).join('');
    const t=document.getElementById('buyerOrders');
    t.innerHTML='<tr><th>ID</th><th>Status</th></tr>'+db.orders.map(o=>`<tr><td>${o.id}</td><td>${o.status}</td></tr>`).join('');
  }
  if(role==='SELLER'){
    const t=document.getElementById('sellerOrders');
    t.innerHTML='<tr><th>ID</th><th>Status</th><th>Aksi</th></tr>'+
      db.orders.map(o=>`
      <tr><td>${o.id}</td><td>${o.status}</td>
      <td>${o.status==='PAID'?'<button onclick="process('+o.id+')">Proses</button>':''}</td></tr>`).join('');
  }
  if(role==='ADMIN'){
    const t=document.getElementById('adminOrders');
    t.innerHTML='<tr><th>ID</th><th>Status</th><th>Aksi</th></tr>'+
      db.orders.map(o=>`
      <tr><td>${o.id}</td><td>${o.status}</td>
      <td>${o.status==='WAITING_PAYMENT'?'<button onclick="pay('+o.id+')">Konfirmasi</button>':''}</td></tr>`).join('');
  }
}

function order(pid){
  const db=JSON.parse(localStorage.getItem('db'));
  db.orders.push({id:Date.now(),status:'WAITING_PAYMENT'});
  localStorage.setItem('db',JSON.stringify(db)); render();
}
function pay(id){
  const db=JSON.parse(localStorage.getItem('db'));
  db.orders=db.orders.map(o=>o.id===id?{...o,status:'PAID'}:o);
  localStorage.setItem('db',JSON.stringify(db)); render();
}
function process(id){
  const db=JSON.parse(localStorage.getItem('db'));
  db.orders=db.orders.map(o=>o.id===id?{...o,status:'PROCESSING'}:o);
  localStorage.setItem('db',JSON.stringify(db)); render();
}
function addProduct(){
  const db=JSON.parse(localStorage.getItem('db'));
  db.products.push({id:Date.now(),name:pname.value,price:+pprice.value});
  localStorage.setItem('db',JSON.stringify(db)); pname.value='';pprice.value=''; render();
}
</script>
</body>
</html>
